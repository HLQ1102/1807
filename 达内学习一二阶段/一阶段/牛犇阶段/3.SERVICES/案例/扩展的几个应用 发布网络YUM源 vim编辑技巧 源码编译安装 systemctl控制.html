
<!-- saved from url=(0079)http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html -->
<html xmlns="http://www.w3.org/1999/xhtml" class="translated-ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>CASE</title>
    
    <script type="text/javascript" src="./扩展的几个应用 发布网络YUM源 vim编辑技巧 源码编译安装 systemctl控制_files/jquery.min.js.下载">
    </script>
    <script type="text/javascript" src="./扩展的几个应用 发布网络YUM源 vim编辑技巧 源码编译安装 systemctl控制_files/jquery.snippet.js.下载">
    </script>
    <script type="text/javascript" src="./扩展的几个应用 发布网络YUM源 vim编辑技巧 源码编译安装 systemctl控制_files/main.js.下载">
    </script>
    <link type="text/css" href="./扩展的几个应用 发布网络YUM源 vim编辑技巧 源码编译安装 systemctl控制_files/index.css" rel="Stylesheet">
    <link type="text/css" href="./扩展的几个应用 发布网络YUM源 vim编辑技巧 源码编译安装 systemctl控制_files/jquery.snippet.css" rel="Stylesheet">
  <link type="text/css" rel="stylesheet" charset="UTF-8" href="./扩展的几个应用 发布网络YUM源 vim编辑技巧 源码编译安装 systemctl控制_files/translateelement.css"></head>
  <body>
    <div class="source_style_case">
      <a name="page_top_case" id="top_anchor">
      </a><a id="link_top" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#page_top_case"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最佳</font></font></a>
      <h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NSD SERVICES DAY01</font></font></h1>
      <ol class="index">
        <li>
          <a href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#case1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">案例1：补充应用技巧</font></font></a>
        </li>
        <li>
          <a href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#case2"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">案例2：软连接与硬连接</font></font></a>
        </li>
        <li>
          <a href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#case3"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">案例3：男人手册，压缩备份</font></font></a>
        </li>
        <li>
          <a href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#case4"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">案例4：自定义荫软件仓库</font></font></a>
        </li>
        <li>
          <a href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#case5"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">案例5：发布及测试荫仓库</font></font></a>
        </li>
        <li>
          <a href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#case6"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">案例6：VIM效率操作</font></font></a>
        </li>
        <li>
          <a href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#case7"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">案例7：编译安装软件包</font></font></a>
        </li>
        <li>
          <a href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#case8"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">案例8：使用systemctl工具</font></font></a>
        </li>
      </ol>
      <a name="case1">
      </a>
      <h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1案例1：补充应用技巧</font></font></h2>
      <h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.1问题</font></font></h3>
      <p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">本例要求掌握在运维中比较常用的一些扩展命令技巧的使用，完成下列小技巧操作：</font></font></p>
      <ol class="list">
        <li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">采用数值形式将目录/ root的权限调整为rwx ------ 
</font></font></li>
        <li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将记录的历史命令条数更改为200条
</font></font></li>
        <li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">统计/ boot，/ etc / pki目录占用的空间大小
</font></font></li>
        <li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以格式“yyyy-mm-dd HH：MM”显示系统时间
</font></font></li>
      </ol>
      <h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.2方案</font></font></h3>
      <p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">日期日期时间工具：</font></font></p>
      <ul class="list">
        <li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">显示日期时间：日期，日期+“％Y-％m-％d％H：％M：％S”
</font></font></li>
        <li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">调整日期时间：date -s“yyyy-mm-dd HH：MM：SS” 
</font></font></li>
        <li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">恢复为硬件时间：hwclock -s
</font></font></li>
      </ul>
      <h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.3步骤</font></font></h3>
      <p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">实现此案例需要按照如下步骤进行。</font></font></p>
      <p class="number"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">步骤一：采用数值形式将目录/ root的权限调整为rwx ------</font></font></p>
      <p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1）查看原来的权限</font></font></p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">根@ svr7 </font></font><span class="sh_symbol"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">〜]</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">＃LS   </font></font><span class="sh_symbol"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- </font></font></span><span class="sh_normal"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LD   </font></font></span><span class="sh_symbol"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ </font></font></span><span class="sh_normal"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">根</font></font></span><span class="sh_symbol"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/</font></font></span></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dr </font></font><span class="sh_symbol"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> xr </font></font><span class="sh_symbol"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> x </font></font><span class="sh_symbol"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">---。</font></font></span> <span class="sh_number"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">根根</font></font><span class="sh_number"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4096 </font></font></span> <span class="sh_number"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">月   </font></font><span class="sh_number"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">26 </font></font></span> <span class="sh_number"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">14 </font></font></span><span class="sh_symbol"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font></span><span class="sh_number"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">59 </font></font></span><font style="vertical-align: inherit;"><span class="sh_symbol"><font style="vertical-align: inherit;">/ </font></span><span class="sh_normal"><font style="vertical-align: inherit;">根</font></span><span class="sh_symbol"><font style="vertical-align: inherit;">/</font></span></font><span class="sh_normal"> </span><span class="sh_symbol"><font style="vertical-align: inherit;"></font></span><span class="sh_normal"><font style="vertical-align: inherit;"></font></span><span class="sh_symbol"><font style="vertical-align: inherit;"></font></span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@svr7 ~]# ls  -ld  /root/<font></font>
dr-xr-x---. 22 root root 4096 3月  26 14:59 /root/<font></font>
</pre></div></div>
      <p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2）修改为新权限</font></font></p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> root @svr7 </font></font><span class="sh_symbol"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">~]</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> #chmod   </font></font><span class="sh_number"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">700 </font></font></span><font style="vertical-align: inherit;"><span class="sh_symbol"><font style="vertical-align: inherit;">/ </font></span><span class="sh_normal"><font style="vertical-align: inherit;">root </font></span><span class="sh_symbol"><font style="vertical-align: inherit;">/</font></span></font><span class="sh_normal">  </span><span class="sh_symbol"><font style="vertical-align: inherit;"></font></span><span class="sh_normal"><font style="vertical-align: inherit;"></font></span><span class="sh_symbol"><font style="vertical-align: inherit;"></font></span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@svr7 ~]# chmod  700  /root/
</pre></div></div>
      <p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3）确认权限设置结果</font></font></p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">根@ svr7 </font></font><span class="sh_symbol"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">〜]</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">＃LS   </font></font><span class="sh_symbol"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- </font></font></span><span class="sh_normal"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LD   </font></font></span><span class="sh_symbol"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ </font></font></span><span class="sh_normal"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">根</font></font></span><span class="sh_symbol"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/</font></font></span></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">drwx </font></font><span class="sh_symbol"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">------。</font></font></span> <span class="sh_number"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">根根</font></font><span class="sh_number"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4096 </font></font></span> <span class="sh_number"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">月   </font></font><span class="sh_number"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">26 </font></font></span> <span class="sh_number"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">14 </font></font></span><span class="sh_symbol"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font></span><span class="sh_number"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">59 </font></font></span><font style="vertical-align: inherit;"><span class="sh_symbol"><font style="vertical-align: inherit;">/ </font></span><span class="sh_normal"><font style="vertical-align: inherit;">根</font></span><span class="sh_symbol"><font style="vertical-align: inherit;">/</font></span></font><span class="sh_normal"> </span><span class="sh_symbol"><font style="vertical-align: inherit;"></font></span><span class="sh_normal"><font style="vertical-align: inherit;"></font></span><span class="sh_symbol"><font style="vertical-align: inherit;"></font></span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@svr7 ~]# ls  -ld  /root/<font></font>
drwx------. 22 root root 4096 3月  26 14:59 /root/<font></font>
</pre></div></div>
      <p class="number"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">步骤二：将记录的历史命令条数更改为200条</font></font></p>
      <p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1）调整记录条数</font></font></p>
      <p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">修改配置文件/ etc / profile中，找到HISTSIZE行，将此变量的值修改为200：</font></font></p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@svr7 <span class="sh_symbol">~]</span># <span class="sh_normal">vim  </span><span class="sh_symbol">/</span><span class="sh_normal">etc</span><span class="sh_symbol">/</span>profile</li><li><span class="sh_symbol">..</span> <span class="sh_symbol">..</span></li><li>HISTSIZE <span class="sh_symbol">=</span> <span class="sh_number">200</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@svr7 ~]# vim  /etc/profile<font></font>
.. ..<font></font>
HISTSIZE = 200<font></font>
</pre></div></div>
      <p>2）确认设置结果</p>
      <p>所有用户重新登录以后即可生效：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@svr7 <span class="sh_symbol">~]</span># su  <span class="sh_symbol">-</span>  root</li><li><span class="sh_symbol">[</span>root@svr7 <span class="sh_symbol">~]</span># echo  $HISTSIZE</li><li><span class="sh_number">200</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@svr7 ~]# su  -  root<font></font>
[root@svr7 ~]# echo  $HISTSIZE<font></font>
200<font></font>
</pre></div></div>
      <p class="number">步骤三：统计 /boot、/etc/pki 目录占用的空间大小</p>
      <p>1）分别统计结果</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@svr7 <span class="sh_symbol">~]</span># du  <span class="sh_symbol">-</span><span class="sh_normal">sh  </span><span class="sh_symbol">/</span><span class="sh_normal">boot</span><span class="sh_symbol">/</span>  <span class="sh_regexp">/etc/</span><span class="sh_normal">pki</span><span class="sh_symbol">/</span></li><li>130<span class="sh_normal">M  &nbsp;&nbsp;&nbsp;&nbsp;</span><span class="sh_symbol">/</span><span class="sh_normal">boot</span><span class="sh_symbol">/</span></li><li><span class="sh_number">1</span><span class="sh_symbol">.</span>5<span class="sh_normal">M&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="sh_symbol">/</span><span class="sh_normal">etc</span><span class="sh_symbol">/</span><span class="sh_normal">pki</span><span class="sh_symbol">/</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@svr7 ~]# du  -sh  /boot/  /etc/pki/<font></font>
130M  	/boot/<font></font>
1.5M	/etc/pki/<font></font>
</pre></div></div>
      <p>2）比较du与ls查看文件大小的差异（默认块大小4096字节）：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@svr7 <span class="sh_symbol">~]</span># ls  <span class="sh_symbol">-</span><span class="sh_normal">lh  </span><span class="sh_symbol">/</span><span class="sh_normal">etc</span><span class="sh_symbol">/</span>inittab  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">//数据大小511字节</span></li><li><span class="sh_symbol">-</span>rw<span class="sh_symbol">-</span>r<span class="sh_symbol">--</span>r<span class="sh_symbol">--.</span> <span class="sh_number">1</span> root root <span class="sh_number">511</span> Sep <span class="sh_number">16</span>  <span class="sh_number">2015</span><span class="sh_normal"> </span><span class="sh_symbol">/</span><span class="sh_normal">etc</span><span class="sh_symbol">/</span>inittab</li><li><span class="sh_symbol">[</span>root@svr7 <span class="sh_symbol">~]</span># du  <span class="sh_symbol">-</span><span class="sh_normal">sh </span><span class="sh_symbol">/</span><span class="sh_normal">etc</span><span class="sh_symbol">/</span>inittab  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">//实际占用4KB磁盘空间</span></li><li><span class="sh_number">4</span><span class="sh_symbol">.</span>0<span class="sh_normal">K&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="sh_symbol">/</span><span class="sh_normal">etc</span><span class="sh_symbol">/</span>inittab</li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@svr7 ~]# ls  -lh  /etc/inittab  					//数据大小511字节<font></font>
-rw-r--r--. 1 root root 511 Sep 16  2015 /etc/inittab<font></font>
[root@svr7 ~]# du  -sh /etc/inittab  					//实际占用4KB磁盘空间<font></font>
4.0K	/etc/inittab<font></font>
</pre></div></div>
      <p class="number">步骤四：以格式“yyyy-mm-dd HH:MM” 显示系统时间</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@svr7 <span class="sh_symbol">~]</span># date  <span class="sh_symbol">+</span><span class="sh_string">"%F %R"</span></li><li><span class="sh_number">2016-12-26</span> <span class="sh_number">16</span><span class="sh_symbol">:</span><span class="sh_number">23</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@svr7 ~]# date  +"%F %R"<font></font>
2016-12-26 16:23<font></font>
</pre></div></div>
      <a name="case2">
      </a>
      <h2>2 案例2：软连接与硬连接</h2>
      <h3>2.1 问题</h3>
      <p>本例要求理解软连接与硬连接的基本差异，完成下列操作：</p>
      <ol class="list">
        <li>新建文件 file1，内容为 AAAA
</li>
        <li>为 file1 建立软连接 file1-s，对比两文件内容
</li>
        <li>为 file1 建立硬连接 file1-h，对比两文件内容
</li>
        <li>对比上述 3 个文件的 i 节点编号
</li>
        <li>删除文件 file1 ，再查看文件 file1-s、file1-h 内容
</li>
      </ol>
      <h3>2.2 方案</h3>
      <p>软连接与硬连接：</p>
      <ul class="list">
        <li>软连接：指向原始文件的路径，若原始文件被删除，连接文件将失效；原始文件可以是目录；原始文件与连接文件可以在不同的分区/文件系统
</li>
        <li>硬连接：指向原始文件的i节点档案，若原始文件被删除，连接文件仍然有效；原始文件不能是目录；原始文件与连接文件必须在同一个分区/文件系统 
</li>
      </ul>
      <h3>2.3 步骤</h3>
      <p>实现此案例需要按照如下步骤进行。</p>
      <p class="number">步骤一：使用ln命令为文档/目录建立连接</p>
      <p>1）新建一个测试文件</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@svr7 <span class="sh_symbol">~]</span># vim  file1</li><li>AAAA</li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@svr7 ~]# vim  file1<font></font>
AAAA<font></font>
</pre></div></div>
      <p>2）为文件file1建立软连接file1-s并测试</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@svr7 <span class="sh_symbol">~]</span># ln  <span class="sh_symbol">-</span>s  file1  file1<span class="sh_symbol">-</span>s</li><li><span class="sh_symbol">[</span>root@svr7 <span class="sh_symbol">~]</span># cat  file1<span class="sh_symbol">-</span>s </li><li>linux<span class="sh_symbol">.</span>tedu<span class="sh_symbol">.</span>cn</li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@svr7 ~]# ln  -s  file1  file1-s<font></font>
[root@svr7 ~]# cat  file1-s <font></font>
linux.tedu.cn<font></font>
</pre></div></div>
      <p>3）为文件file1建立硬连接file1-h并测试</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@svr7 <span class="sh_symbol">~]</span># ln  file1  file1<span class="sh_symbol">-</span>h</li><li><span class="sh_symbol">[</span>root@svr7 <span class="sh_symbol">~]</span># cat  file1<span class="sh_symbol">-</span>h </li><li>linux<span class="sh_symbol">.</span>tedu<span class="sh_symbol">.</span>cn</li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@svr7 ~]# ln  file1  file1-h<font></font>
[root@svr7 ~]# cat  file1-h <font></font>
linux.tedu.cn<font></font>
</pre></div></div>
      <p>4）对比原始文件、软连接、硬连接的属性</p>
      <p>可以发现软连接只是一个快捷方式，而硬连接与原始文件的i节点编号相同，其实对应同一块磁盘存储：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@svr7 <span class="sh_symbol">~]</span># ls  <span class="sh_symbol">-</span><span class="sh_normal">li  </span><span class="sh_symbol">/</span><span class="sh_normal">root</span><span class="sh_symbol">/</span>f0<span class="sh_symbol">*.</span>txt</li><li><span class="sh_number">204645793</span> <span class="sh_symbol">-</span>rw<span class="sh_symbol">-</span>r<span class="sh_symbol">--</span>r<span class="sh_symbol">--.</span> <span class="sh_number">2</span> root root <span class="sh_number">14</span> Jan  <span class="sh_number">6</span> <span class="sh_number">12</span><span class="sh_symbol">:</span><span class="sh_number">14</span> file1<span class="sh_symbol">-</span>h</li><li><span class="sh_number">201628464</span> lrwxrwxrwx<span class="sh_symbol">.</span> <span class="sh_number">1</span> root root <span class="sh_number">12</span> Jan  <span class="sh_number">6</span> <span class="sh_number">12</span><span class="sh_symbol">:</span><span class="sh_number">16</span> file1<span class="sh_symbol">-</span>s <span class="sh_symbol">-&gt;</span> file1</li><li><span class="sh_number">204645793</span> <span class="sh_symbol">-</span>rw<span class="sh_symbol">-</span>r<span class="sh_symbol">--</span>r<span class="sh_symbol">--.</span> <span class="sh_number">2</span> root root <span class="sh_number">14</span> Jan  <span class="sh_number">6</span> <span class="sh_number">12</span><span class="sh_symbol">:</span><span class="sh_number">14</span> file1</li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@svr7 ~]# ls  -li  /root/f0*.txt<font></font>
204645793 -rw-r--r--. 2 root root 14 Jan  6 12:14 file1-h<font></font>
201628464 lrwxrwxrwx. 1 root root 12 Jan  6 12:16 file1-s -&gt; file1<font></font>
204645793 -rw-r--r--. 2 root root 14 Jan  6 12:14 file1<font></font>
</pre></div></div>
      <p class="number">步骤二：原始文件删除测试</p>
      <p>1）当原始文件被删除时，软连接将会失效，而硬连接仍然可访问文件数据</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@svr7 <span class="sh_symbol">~]</span># rm  <span class="sh_symbol">-</span>rf  file1 </li><li><span class="sh_symbol">[</span>root@svr7 <span class="sh_symbol">~]</span># cat  file1<span class="sh_symbol">-</span>s </li><li>cat<span class="sh_symbol">:</span> file1<span class="sh_symbol">-</span>s<span class="sh_symbol">:</span> No such file or directory</li><li><span class="sh_symbol">[</span>root@svr7 <span class="sh_symbol">~]</span># cat  file1<span class="sh_symbol">-</span>h </li><li>linux<span class="sh_symbol">.</span>tedu<span class="sh_symbol">.</span>cn</li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@svr7 ~]# rm  -rf  file1 <font></font>
[root@svr7 ~]# cat  file1-s <font></font>
cat: file1-s: No such file or directory<font></font>
[root@svr7 ~]# cat  file1-h <font></font>
linux.tedu.cn<font></font>
</pre></div></div>
      <p>2）如果已知原始文件和硬连接的路径，当原始文件丢失时，可以快速重建</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@svr7 <span class="sh_symbol">~]</span># ln  file1<span class="sh_symbol">-</span>h  file1</li><li><span class="sh_symbol">[</span>root@svr7 <span class="sh_symbol">~]</span># ls  <span class="sh_symbol">-</span><span class="sh_normal">li  </span><span class="sh_symbol">/</span><span class="sh_normal">root</span><span class="sh_symbol">/</span>f0<span class="sh_symbol">*.</span>txt</li><li><span class="sh_number">204645793</span> <span class="sh_symbol">-</span>rw<span class="sh_symbol">-</span>r<span class="sh_symbol">--</span>r<span class="sh_symbol">--.</span> <span class="sh_number">2</span> root root <span class="sh_number">14</span> Jan  <span class="sh_number">6</span> <span class="sh_number">12</span><span class="sh_symbol">:</span><span class="sh_number">14</span> file1<span class="sh_symbol">-</span>h</li><li><span class="sh_number">201628464</span> lrwxrwxrwx<span class="sh_symbol">.</span> <span class="sh_number">1</span> root root <span class="sh_number">12</span> Jan  <span class="sh_number">6</span> <span class="sh_number">12</span><span class="sh_symbol">:</span><span class="sh_number">16</span> file1<span class="sh_symbol">-</span>s <span class="sh_symbol">-&gt;</span> file1</li><li><span class="sh_number">204645793</span> <span class="sh_symbol">-</span>rw<span class="sh_symbol">-</span>r<span class="sh_symbol">--</span>r<span class="sh_symbol">--.</span> <span class="sh_number">2</span> root root <span class="sh_number">14</span> Jan  <span class="sh_number">6</span> <span class="sh_number">12</span><span class="sh_symbol">:</span><span class="sh_number">14</span> file1</li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@svr7 ~]# ln  file1-h  file1<font></font>
[root@svr7 ~]# ls  -li  /root/f0*.txt<font></font>
204645793 -rw-r--r--. 2 root root 14 Jan  6 12:14 file1-h<font></font>
201628464 lrwxrwxrwx. 1 root root 12 Jan  6 12:16 file1-s -&gt; file1<font></font>
204645793 -rw-r--r--. 2 root root 14 Jan  6 12:14 file1<font></font>
</pre></div></div>
      <p>3）不支持为目录创建硬连接，但可以为目录建立软连接</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@svr7 <span class="sh_symbol">~]</span># <span class="sh_normal">ln  </span><span class="sh_symbol">/</span><span class="sh_normal">etc</span><span class="sh_symbol">/</span><span class="sh_normal">sysconfig</span><span class="sh_symbol">/</span>network<span class="sh_symbol">-</span><span class="sh_normal">scripts</span><span class="sh_symbol">/</span>  <span class="sh_regexp">/etc/</span>network</li><li>ln<span class="sh_symbol">:</span> <span class="sh_string">'/etc/sysconfig/network-scripts/'</span><span class="sh_symbol">:</span> hard link not allowed <span class="sh_keyword">for</span> directory </li><li><span class="sh_symbol">[</span>root@svr7 <span class="sh_symbol">~]</span># ln  <span class="sh_symbol">-</span><span class="sh_normal">s  </span><span class="sh_symbol">/</span><span class="sh_normal">etc</span><span class="sh_symbol">/</span><span class="sh_normal">sysconfig</span><span class="sh_symbol">/</span>network<span class="sh_symbol">-</span><span class="sh_normal">scripts</span><span class="sh_symbol">/</span>  <span class="sh_regexp">/etc/i</span>nterface</li><li><span class="sh_symbol">[</span>root@svr7 <span class="sh_symbol">~]</span># ls  <span class="sh_symbol">-</span><span class="sh_normal">l  </span><span class="sh_symbol">/</span><span class="sh_normal">etc</span><span class="sh_symbol">/</span><span class="sh_keyword">interface</span> </li><li>lrwxrwxrwx<span class="sh_symbol">.</span> <span class="sh_number">1</span> root root <span class="sh_number">31</span> Jan  <span class="sh_number">6</span> <span class="sh_number">12</span><span class="sh_symbol">:</span><span class="sh_number">28</span><span class="sh_normal"> </span><span class="sh_symbol">/</span><span class="sh_normal">etc</span><span class="sh_symbol">/</span><span class="sh_keyword">interface</span> <span class="sh_symbol">-&gt;</span> <span class="sh_regexp">/etc/</span><span class="sh_normal">sysconfig</span><span class="sh_symbol">/</span>network<span class="sh_symbol">-</span><span class="sh_normal">scripts</span><span class="sh_symbol">/</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@svr7 ~]# ln  /etc/sysconfig/network-scripts/  /etc/network<font></font>
ln: '/etc/sysconfig/network-scripts/': hard link not allowed for directory <font></font>
[root@svr7 ~]# ln  -s  /etc/sysconfig/network-scripts/  /etc/interface<font></font>
[root@svr7 ~]# ls  -l  /etc/interface <font></font>
lrwxrwxrwx. 1 root root 31 Jan  6 12:28 /etc/interface -&gt; /etc/sysconfig/network-scripts/<font></font>
</pre></div></div>
      <a name="case3">
      </a>
      <h2>3 案例3：man手册、zip备份</h2>
      <h3>3.1 问题</h3>
      <p>本例要求掌握man帮助手册的使用，以及zip压缩/解压缩的操作，完成下列任务：</p>
      <ol class="list">
        <li>查阅passwd命令、/etc/passwd配置文件的手册页
</li>
        <li>使用zip打包/usr/share/doc/qemu-kvm/目录
</li>
      </ol>
      <h3>3.2 方案</h3>
      <p>zip/unzip压缩与解压缩：</p>
      <ul class="list">
        <li>制作zip压缩包：zip  [-r]  备份文件.zip  被归档的文档... 
</li>
        <li>释放zip压缩包：unzip  备份文件.zip  [-d 目标文件夹]
</li>
      </ul>
      <h3>3.3 步骤</h3>
      <p>实现此案例需要按照如下步骤进行。</p>
      <p class="number">步骤一：使用man手册页获取帮助</p>
      <p>1）查看passwd命令的手册页</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@svr7 <span class="sh_symbol">~]</span># man  passwd</li><li><span class="sh_function">PASSWD</span><span class="sh_symbol">(</span><span class="sh_number">1</span><span class="sh_symbol">)</span>                      User utilities                      <span class="sh_function">PASSWD</span><span class="sh_symbol">(</span><span class="sh_number">1</span><span class="sh_symbol">)</span></li><li><span style="display:none;">&nbsp;</span></li><li>NAME</li><li>       passwd <span class="sh_symbol">-</span> update user<span class="sh_string">'s authentication tokens</span></li><li><span style="display:none;">&nbsp;</span></li><li><span class="sh_string">SYNOPSIS</span></li><li><span class="sh_string">       passwd  [-k]  [-l]  [-u [-f]] [-d] [-e] [-n mindays] [-x maxdays] [-w</span></li><li><span class="sh_string">       warndays] [-i inactivedays] [-S] [--stdin] [username]</span></li><li><span style="display:none;">&nbsp;</span></li><li><span class="sh_string">DESCRIPTION</span></li><li><span class="sh_string">       The passwd utility is used to update user'</span>s authentication <span class="sh_function">token</span><span class="sh_symbol">(</span>s<span class="sh_symbol">).</span></li><li><span style="display:none;">&nbsp;</span></li><li>       This task is achieved through calls to the Linux<span class="sh_symbol">-</span>PAM and Libuser API<span class="sh_symbol">.</span></li><li>       Essentially<span class="sh_symbol">,</span>  it initializes itself as a <span class="sh_string">"passwd"</span> service <span class="sh_keyword">with</span> Linux<span class="sh_symbol">-</span></li><li>       PAM and utilizes configured password modules to authenticate and then</li><li>       update a user<span class="sh_string">'s password.</span></li><li><span class="sh_string">.. ..</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@svr7 ~]# man  passwd<font></font>
PASSWD(1)                      User utilities                      PASSWD(1)<font></font>
<font></font>
NAME<font></font>
       passwd - update user's authentication tokens<font></font>
<font></font>
SYNOPSIS<font></font>
       passwd  [-k]  [-l]  [-u [-f]] [-d] [-e] [-n mindays] [-x maxdays] [-w<font></font>
       warndays] [-i inactivedays] [-S] [--stdin] [username]<font></font>
<font></font>
DESCRIPTION<font></font>
       The passwd utility is used to update user's authentication token(s).<font></font>
<font></font>
       This task is achieved through calls to the Linux-PAM and Libuser API.<font></font>
       Essentially,  it initializes itself as a "passwd" service with Linux-<font></font>
       PAM and utilizes configured password modules to authenticate and then<font></font>
       update a user's password.<font></font>
.. ..<font></font>
</pre></div></div>
      <p>2）查看/etc/passwd配置文件的手册页</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@svr7 <span class="sh_symbol">~]</span># man  <span class="sh_number">2</span>  passwd</li><li><span class="sh_function">PASSWD</span><span class="sh_symbol">(</span><span class="sh_number">5</span><span class="sh_symbol">)</span>                 Linux Programmer<span class="sh_string">'s Manual                PASSWD(5)</span></li><li><span style="display:none;">&nbsp;</span></li><li><span class="sh_string">NAME</span></li><li><span class="sh_string">       passwd - password file</span></li><li><span style="display:none;">&nbsp;</span></li><li><span class="sh_string">DESCRIPTION</span></li><li><span class="sh_string">       The  /etc/passwd  file  is  a  text  file  that  describes user login</span></li><li><span class="sh_string">       accounts for the system.  It should have read permission allowed  for</span></li><li><span class="sh_string">       all users (many utilities, like ls(1) use it to map user IDs to user‐</span></li><li><span class="sh_string">       names), but write access only for the superuser.</span></li><li><span style="display:none;">&nbsp;</span></li><li><span class="sh_string">       In the good old days there was no great  problem  with  this  general</span></li><li><span class="sh_string">       read  permission.   Everybody could read the encrypted passwords, but</span></li><li><span class="sh_string">       the hardware was too slow to crack a well-chosen password, and  more‐</span></li><li><span class="sh_string">       over  the  basic assumption used to be that of a friendly user-commu‐</span></li><li><span class="sh_string">       nity.  These days many people run some version of the shadow password</span></li><li><span class="sh_string">       suite,  where /etc/passwd has an '</span>x<span class="sh_string">' character in the password</span></li><li><span class="sh_string">.. ..</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@svr7 ~]# man  2  passwd<font></font>
PASSWD(5)                 Linux Programmer's Manual                PASSWD(5)<font></font>
<font></font>
NAME<font></font>
       passwd - password file<font></font>
<font></font>
DESCRIPTION<font></font>
       The  /etc/passwd  file  is  a  text  file  that  describes user login<font></font>
       accounts for the system.  It should have read permission allowed  for<font></font>
       all users (many utilities, like ls(1) use it to map user IDs to user‐<font></font>
       names), but write access only for the superuser.<font></font>
<font></font>
       In the good old days there was no great  problem  with  this  general<font></font>
       read  permission.   Everybody could read the encrypted passwords, but<font></font>
       the hardware was too slow to crack a well-chosen password, and  more‐<font></font>
       over  the  basic assumption used to be that of a friendly user-commu‐<font></font>
       nity.  These days many people run some version of the shadow password<font></font>
       suite,  where /etc/passwd has an 'x' character in the password<font></font>
.. ..<font></font>
</pre></div></div>
      <p class="number">步骤二：使用zip命令制作压缩包</p>
      <p>1）将目录/usr/share/doc/qemu-kvm/备份为/root/qemu-kvm.zip</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@svr7 <span class="sh_symbol">~]</span># zip  <span class="sh_symbol">-</span><span class="sh_normal">r  </span><span class="sh_symbol">/</span><span class="sh_normal">root</span><span class="sh_symbol">/</span>qemu<span class="sh_symbol">-</span>kvm<span class="sh_symbol">.</span><span class="sh_normal">zip  </span><span class="sh_symbol">/</span><span class="sh_normal">usr</span><span class="sh_symbol">/</span><span class="sh_normal">share</span><span class="sh_symbol">/</span><span class="sh_normal">doc</span><span class="sh_symbol">/</span>qemu<span class="sh_symbol">-</span><span class="sh_normal">kvm</span><span class="sh_symbol">/</span></li><li>  adding<span class="sh_symbol">:</span> <span class="sh_normal">usr</span><span class="sh_symbol">/</span><span class="sh_normal">share</span><span class="sh_symbol">/</span><span class="sh_normal">doc</span><span class="sh_symbol">/</span>qemu<span class="sh_symbol">-</span><span class="sh_normal">kvm</span><span class="sh_symbol">/</span> <span class="sh_symbol">(</span>stored <span class="sh_number">0</span><span class="sh_symbol">%)</span></li><li>  adding<span class="sh_symbol">:</span> <span class="sh_normal">usr</span><span class="sh_symbol">/</span><span class="sh_normal">share</span><span class="sh_symbol">/</span><span class="sh_normal">doc</span><span class="sh_symbol">/</span>qemu<span class="sh_symbol">-</span><span class="sh_normal">kvm</span><span class="sh_symbol">/</span><span class="sh_function">COPYING</span> <span class="sh_symbol">(</span>deflated <span class="sh_number">62</span><span class="sh_symbol">%)</span></li><li>  adding<span class="sh_symbol">:</span> <span class="sh_normal">usr</span><span class="sh_symbol">/</span><span class="sh_normal">share</span><span class="sh_symbol">/</span><span class="sh_normal">doc</span><span class="sh_symbol">/</span>qemu<span class="sh_symbol">-</span><span class="sh_normal">kvm</span><span class="sh_symbol">/</span>COPYING<span class="sh_symbol">.</span><span class="sh_function">LIB</span> <span class="sh_symbol">(</span>deflated <span class="sh_number">65</span><span class="sh_symbol">%)</span></li><li>  adding<span class="sh_symbol">:</span> <span class="sh_normal">usr</span><span class="sh_symbol">/</span><span class="sh_normal">share</span><span class="sh_symbol">/</span><span class="sh_normal">doc</span><span class="sh_symbol">/</span>qemu<span class="sh_symbol">-</span><span class="sh_normal">kvm</span><span class="sh_symbol">/</span><span class="sh_function">Changelog</span> <span class="sh_symbol">(</span>deflated <span class="sh_number">61</span><span class="sh_symbol">%)</span></li><li>  adding<span class="sh_symbol">:</span> <span class="sh_normal">usr</span><span class="sh_symbol">/</span><span class="sh_normal">share</span><span class="sh_symbol">/</span><span class="sh_normal">doc</span><span class="sh_symbol">/</span>qemu<span class="sh_symbol">-</span><span class="sh_normal">kvm</span><span class="sh_symbol">/</span><span class="sh_function">LICENSE</span> <span class="sh_symbol">(</span>deflated <span class="sh_number">45</span><span class="sh_symbol">%)</span></li><li>  adding<span class="sh_symbol">:</span> <span class="sh_normal">usr</span><span class="sh_symbol">/</span><span class="sh_normal">share</span><span class="sh_symbol">/</span><span class="sh_normal">doc</span><span class="sh_symbol">/</span>qemu<span class="sh_symbol">-</span><span class="sh_normal">kvm</span><span class="sh_symbol">/</span><span class="sh_function">README</span> <span class="sh_symbol">(</span>deflated <span class="sh_number">4</span><span class="sh_symbol">%)</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@svr7 ~]# zip  -r  /root/qemu-kvm.zip  /usr/share/doc/qemu-kvm/<font></font>
  adding: usr/share/doc/qemu-kvm/ (stored 0%)<font></font>
  adding: usr/share/doc/qemu-kvm/COPYING (deflated 62%)<font></font>
  adding: usr/share/doc/qemu-kvm/COPYING.LIB (deflated 65%)<font></font>
  adding: usr/share/doc/qemu-kvm/Changelog (deflated 61%)<font></font>
  adding: usr/share/doc/qemu-kvm/LICENSE (deflated 45%)<font></font>
  adding: usr/share/doc/qemu-kvm/README (deflated 4%)<font></font>
</pre></div></div>
      <p>2）恢复测试</p>
      <p>删除目标文件夹并确认结果：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@svr7 <span class="sh_symbol">~]</span># rm  <span class="sh_symbol">-</span><span class="sh_normal">rf  </span><span class="sh_symbol">/</span><span class="sh_normal">usr</span><span class="sh_symbol">/</span><span class="sh_normal">share</span><span class="sh_symbol">/</span><span class="sh_normal">doc</span><span class="sh_symbol">/</span>qemu<span class="sh_symbol">-</span><span class="sh_normal">kvm</span><span class="sh_symbol">/</span></li><li><span class="sh_symbol">[</span>root@svr7 <span class="sh_symbol">~]</span># <span class="sh_normal">ls  </span><span class="sh_symbol">/</span><span class="sh_normal">usr</span><span class="sh_symbol">/</span><span class="sh_normal">share</span><span class="sh_symbol">/</span><span class="sh_normal">doc</span><span class="sh_symbol">/</span>qemu<span class="sh_symbol">-</span><span class="sh_normal">kvm</span><span class="sh_symbol">/</span></li><li>ls<span class="sh_symbol">:</span> cannot <span class="sh_normal">access </span><span class="sh_symbol">/</span><span class="sh_normal">usr</span><span class="sh_symbol">/</span><span class="sh_normal">share</span><span class="sh_symbol">/</span><span class="sh_normal">doc</span><span class="sh_symbol">/</span>qemu<span class="sh_symbol">-</span><span class="sh_normal">kvm</span><span class="sh_symbol">/:</span> No such file or directory</li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@svr7 ~]# rm  -rf  /usr/share/doc/qemu-kvm/<font></font>
[root@svr7 ~]# ls  /usr/share/doc/qemu-kvm/<font></font>
ls: cannot access /usr/share/doc/qemu-kvm/: No such file or directory<font></font>
</pre></div></div>
      <p>恢复目标文件夹并确认结果：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@svr7 <span class="sh_symbol">~]</span># <span class="sh_normal">unzip  </span><span class="sh_symbol">/</span><span class="sh_normal">root</span><span class="sh_symbol">/</span>qemu<span class="sh_symbol">-</span>kvm<span class="sh_symbol">.</span>zip  <span class="sh_symbol">-</span><span class="sh_normal">d  </span><span class="sh_symbol">/</span></li><li>Archive<span class="sh_symbol">:</span>  <span class="sh_regexp">/root/</span>qemu<span class="sh_symbol">-</span>kvm<span class="sh_symbol">.</span>zip</li><li>   creating<span class="sh_symbol">:</span> <span class="sh_regexp">/usr/</span><span class="sh_normal">share</span><span class="sh_symbol">/</span><span class="sh_normal">doc</span><span class="sh_symbol">/</span>qemu<span class="sh_symbol">-</span><span class="sh_normal">kvm</span><span class="sh_symbol">/</span></li><li>  inflating<span class="sh_symbol">:</span> <span class="sh_regexp">/usr/</span><span class="sh_normal">share</span><span class="sh_symbol">/</span><span class="sh_normal">doc</span><span class="sh_symbol">/</span>qemu<span class="sh_symbol">-</span><span class="sh_normal">kvm</span><span class="sh_symbol">/</span>COPYING  </li><li>  inflating<span class="sh_symbol">:</span> <span class="sh_regexp">/usr/</span><span class="sh_normal">share</span><span class="sh_symbol">/</span><span class="sh_normal">doc</span><span class="sh_symbol">/</span>qemu<span class="sh_symbol">-</span><span class="sh_normal">kvm</span><span class="sh_symbol">/</span>COPYING<span class="sh_symbol">.</span>LIB  </li><li>  inflating<span class="sh_symbol">:</span> <span class="sh_regexp">/usr/</span><span class="sh_normal">share</span><span class="sh_symbol">/</span><span class="sh_normal">doc</span><span class="sh_symbol">/</span>qemu<span class="sh_symbol">-</span><span class="sh_normal">kvm</span><span class="sh_symbol">/</span>Changelog  </li><li><span class="sh_symbol">..</span> <span class="sh_symbol">..</span></li><li><span class="sh_symbol">[</span>root@svr7 <span class="sh_symbol">~]</span># <span class="sh_normal">ls  </span><span class="sh_symbol">/</span><span class="sh_normal">usr</span><span class="sh_symbol">/</span><span class="sh_normal">share</span><span class="sh_symbol">/</span><span class="sh_normal">doc</span><span class="sh_symbol">/</span>qemu<span class="sh_symbol">-</span><span class="sh_normal">kvm</span><span class="sh_symbol">/</span></li><li>COPYING      README                    qemu<span class="sh_symbol">-</span>tech<span class="sh_symbol">.</span>html</li><li>COPYING<span class="sh_symbol">.</span>LIB  README<span class="sh_symbol">.</span>rhel6<span class="sh_symbol">-</span>gpxe<span class="sh_symbol">-</span>source  qmp<span class="sh_symbol">-</span>commands<span class="sh_symbol">.</span>txt</li><li>Changelog    README<span class="sh_symbol">.</span>systemtap          qmp<span class="sh_symbol">-</span>events<span class="sh_symbol">.</span>txt</li><li>LICENSE      qemu<span class="sh_symbol">-</span>doc<span class="sh_symbol">.</span>html             qmp<span class="sh_symbol">-</span>spec<span class="sh_symbol">.</span>txt</li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@svr7 ~]# unzip  /root/qemu-kvm.zip  -d  /<font></font>
Archive:  /root/qemu-kvm.zip<font></font>
   creating: /usr/share/doc/qemu-kvm/<font></font>
  inflating: /usr/share/doc/qemu-kvm/COPYING  <font></font>
  inflating: /usr/share/doc/qemu-kvm/COPYING.LIB  <font></font>
  inflating: /usr/share/doc/qemu-kvm/Changelog  <font></font>
.. ..<font></font>
[root@svr7 ~]# ls  /usr/share/doc/qemu-kvm/<font></font>
COPYING      README                    qemu-tech.html<font></font>
COPYING.LIB  README.rhel6-gpxe-source  qmp-commands.txt<font></font>
Changelog    README.systemtap          qmp-events.txt<font></font>
LICENSE      qemu-doc.html             qmp-spec.txt<font></font>
</pre></div></div>
      <a name="case4">
      </a>
      <h2>4 案例4：自定义yum软件仓库</h2>
      <h3>4.1 问题</h3>
      <p>本例要求在CentOS真机上利用RHEL7的光盘镜像文件准备一个软件仓库目录，完成下列任务：</p>
      <ol class="list">
        <li>创建目录 /var/www/html/rh7dvd 
</li>
        <li>挂载 rhel-server-7.2-x86_64-dvd.iso 到上述目录
</li>
      </ol>
      <p>另外，利用收集的一些第三方RPM软件包文件，配置为可发布的yum仓库目录，相关任务如下：</p>
      <ol class="list">
        <li>挂载RHEL7光盘镜像文件到 /var/www/html/ 目录
</li>
        <li>下载 LibreOffice 办公软件的 rpm 集合版文件
</li>
        <li>将其中的内容释放到 /opt/libreoffice/ 目录
</li>
        <li>为 /opt/libreoffice/ 目录建立仓库档案
</li>
      </ol>
      <h3>4.2 方案</h3>
      <p>作为yum软件源的目录需要准备的内容：</p>
      <ul class="list">
        <li>大量的 .rpm 软件安装包文件
</li>
        <li>针对这些软件包的 repodata/ 仓库档案
</li>
      </ul>
      <p>repodata/ 仓库档案提供的数据：</p>
      <ul class="list">
        <li>filelists.xml.gz：提供所有软件包的文件安装清单
</li>
        <li>primary.xml.gz：提供所有软件包的基本/主要信息
</li>
        <li>other.xml.gz：提供所有软件包的其他信息
</li>
        <li>repomd.xml：提供上述档案数据文件.xml.gz的下载和校验信息
</li>
      </ul>
      <h3>4.3 步骤</h3>
      <p>实现此案例需要按照如下步骤进行。</p>
      <p class="number">步骤一：准备 /var/www/html/rh7dvd 仓库目录</p>
      <p>1）创建目录 /var/www/html/rh7dvd</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@room9pc13 <span class="sh_symbol">~]</span># <span class="sh_normal">mkdir  </span><span class="sh_symbol">/</span><span class="sh_keyword">var</span><span class="sh_regexp">/www/</span><span class="sh_normal">html</span><span class="sh_symbol">/</span>rh7dvd</li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@room9pc13 ~]# mkdir  /var/www/html/rh7dvd
</pre></div></div>
      <p>2）挂载 rhel-server-7.2-x86_64-dvd.iso 到上述目录</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@room9pc13 <span class="sh_symbol">~]</span># <span class="sh_normal">vim  </span><span class="sh_symbol">/</span><span class="sh_normal">etc</span><span class="sh_symbol">/</span>fstab</li><li><span class="sh_symbol">..</span> <span class="sh_symbol">..</span></li><li><span class="sh_regexp">/ISO/</span>rhel<span class="sh_symbol">-</span>server<span class="sh_number">-7.2</span><span class="sh_symbol">-</span>x86_64<span class="sh_symbol">-</span>dvd<span class="sh_symbol">.</span><span class="sh_normal">iso  </span><span class="sh_symbol">/</span><span class="sh_keyword">var</span><span class="sh_regexp">/www/</span><span class="sh_normal">html</span><span class="sh_symbol">/</span>rh7dvd  iso9660  loop<span class="sh_symbol">,</span>ro  <span class="sh_number">0</span>  <span class="sh_number">0</span></li><li><span class="sh_symbol">[</span>root@room9pc13 <span class="sh_symbol">~]</span># mount  <span class="sh_symbol">-</span>a</li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@room9pc13 ~]# vim  /etc/fstab<font></font>
.. ..<font></font>
/ISO/rhel-server-7.2-x86_64-dvd.iso  /var/www/html/rh7dvd  iso9660  loop,ro  0  0<font></font>
[root@room9pc13 ~]# mount  -a<font></font>
</pre></div></div>
      <p>3）确认部署结果</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@room9pc13 <span class="sh_symbol">~]</span># <span class="sh_normal">ls  </span><span class="sh_symbol">/</span><span class="sh_keyword">var</span><span class="sh_regexp">/www/</span><span class="sh_normal">html</span><span class="sh_symbol">/</span><span class="sh_normal">rh7dvd</span><span class="sh_symbol">/</span></li><li>addons  images      Packages                 RPM<span class="sh_symbol">-</span>GPG<span class="sh_symbol">-</span>KEY<span class="sh_symbol">-</span>redhat<span class="sh_symbol">-</span>release</li><li>EFI     isolinux    release<span class="sh_symbol">-</span>notes            TRANS<span class="sh_symbol">.</span>TBL</li><li>EULA    LiveOS      repodata</li><li>GPL     media<span class="sh_symbol">.</span>repo  RPM<span class="sh_symbol">-</span>GPG<span class="sh_symbol">-</span>KEY<span class="sh_symbol">-</span>redhat<span class="sh_symbol">-</span>beta</li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@room9pc13 ~]# ls  /var/www/html/rh7dvd/<font></font>
addons  images      Packages                 RPM-GPG-KEY-redhat-release<font></font>
EFI     isolinux    release-notes            TRANS.TBL<font></font>
EULA    LiveOS      repodata<font></font>
GPL     media.repo  RPM-GPG-KEY-redhat-beta<font></font>
</pre></div></div>
      <p class="number">步骤二：准备 /opt/libreoffice/ 仓库目录</p>
      <p>1）将获取的LibreOffice软件集合包释放到指定目录</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@room9pc13 <span class="sh_symbol">~]</span># ls  LibreOffice_5<span class="sh_number">.1.6</span><span class="sh_symbol">.</span>2_Linux_x86<span class="sh_symbol">-</span>64_rpm<span class="sh_symbol">.</span>zip </li><li>LibreOffice_5<span class="sh_number">.1.6</span><span class="sh_symbol">.</span>2_Linux_x86<span class="sh_symbol">-</span>64_rpm<span class="sh_symbol">.</span>zip</li><li><span class="sh_symbol">[</span>root@room9pc13 <span class="sh_symbol">~]</span># unzip  LibreOffice_5<span class="sh_number">.1</span><span class="sh_symbol">*.</span>zip <span class="sh_symbol">-</span><span class="sh_normal">d </span><span class="sh_symbol">/</span><span class="sh_normal">opt</span><span class="sh_symbol">/</span>libreoffice</li><li> Archive<span class="sh_symbol">:</span>  LibreOffice_5<span class="sh_number">.1.6</span><span class="sh_symbol">.</span>2_Linux_x86<span class="sh_symbol">-</span>64_rpm<span class="sh_symbol">.</span>zip</li><li>  inflating<span class="sh_symbol">:</span> <span class="sh_regexp">/opt/</span><span class="sh_normal">libreoffice</span><span class="sh_symbol">/</span>install              </li><li>   creating<span class="sh_symbol">:</span> <span class="sh_regexp">/opt/</span><span class="sh_normal">libreoffice</span><span class="sh_symbol">/</span>langpack_zh<span class="sh_symbol">-</span><span class="sh_normal">CN</span><span class="sh_symbol">/</span></li><li>   creating<span class="sh_symbol">:</span> <span class="sh_regexp">/opt/</span><span class="sh_normal">libreoffice</span><span class="sh_symbol">/</span>langpack_zh<span class="sh_symbol">-</span><span class="sh_normal">CN</span><span class="sh_symbol">/</span><span class="sh_normal">RPMS</span><span class="sh_symbol">/</span></li><li><span class="sh_symbol">..</span> <span class="sh_symbol">..</span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">//释放到 /opt/libreoffice 目录</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@room9pc13 ~]# ls  LibreOffice_5.1.6.2_Linux_x86-64_rpm.zip <font></font>
LibreOffice_5.1.6.2_Linux_x86-64_rpm.zip<font></font>
[root@room9pc13 ~]# unzip  LibreOffice_5.1*.zip -d /opt/libreoffice<font></font>
 Archive:  LibreOffice_5.1.6.2_Linux_x86-64_rpm.zip<font></font>
  inflating: /opt/libreoffice/install              <font></font>
   creating: /opt/libreoffice/langpack_zh-CN/<font></font>
   creating: /opt/libreoffice/langpack_zh-CN/RPMS/<font></font>
.. .. 										//释放到 /opt/libreoffice 目录<font></font>
</pre></div></div>
      <p>2）使用createrepo建立档案</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@room9pc13 <span class="sh_symbol">~]</span># <span class="sh_normal">createrepo  </span><span class="sh_symbol">/</span><span class="sh_normal">opt</span><span class="sh_symbol">/</span><span class="sh_normal">libreoffice</span><span class="sh_symbol">/</span></li><li>Spawning worker <span class="sh_number">0</span> <span class="sh_keyword">with</span> <span class="sh_number">53</span> pkgs</li><li>Workers Finished</li><li>Saving Primary metadata</li><li>Saving file lists metadata</li><li>Saving other metadata</li><li>Generating sqlite DBs</li><li>Sqlite DBs complete</li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@room9pc13 ~]# createrepo  /opt/libreoffice/<font></font>
Spawning worker 0 with 53 pkgs<font></font>
Workers Finished<font></font>
Saving Primary metadata<font></font>
Saving file lists metadata<font></font>
Saving other metadata<font></font>
Generating sqlite DBs<font></font>
Sqlite DBs complete<font></font>
</pre></div></div>
      <p>3）确认repodata/档案资料</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@room9pc13 <span class="sh_symbol">~]</span># <span class="sh_normal">ls  </span><span class="sh_symbol">/</span><span class="sh_normal">opt</span><span class="sh_symbol">/</span><span class="sh_normal">libreoffice</span><span class="sh_symbol">/</span>repodata</li><li>1a5d8311268f33ad2cbf91382110e1ef9875aeea366897253a5d27fd42f9e317<span class="sh_symbol">-</span>other<span class="sh_symbol">.</span>xml<span class="sh_symbol">.</span>gz</li><li>2cd176f0b00492c0c13e0a659eda7dedeb1ab526dec5fd7c9bac7758558770d2<span class="sh_symbol">-</span>filelists<span class="sh_symbol">.</span>xml<span class="sh_symbol">.</span>gz</li><li>6ecab3585a93a917202e177b9569046238332af449a6492fcace96ea79374668<span class="sh_symbol">-</span>filelists<span class="sh_symbol">.</span>sqlite<span class="sh_symbol">.</span>bz2</li><li>b09a1f838262e0b67a5ab0d6be516bd921a914afd89864e09650f95662a20371<span class="sh_symbol">-</span>primary<span class="sh_symbol">.</span>sqlite<span class="sh_symbol">.</span>bz2</li><li>b6fcf4a24de5dc08585bf52bd34be50d7df376d5fbcf50903bfd3c1dfdf160bf<span class="sh_symbol">-</span>other<span class="sh_symbol">.</span>sqlite<span class="sh_symbol">.</span>bz2</li><li>f57724cf309cc102b2ee25596bf8fb39db3c23880404209ac1e379f7b9fd5c49<span class="sh_symbol">-</span>primary<span class="sh_symbol">.</span>xml<span class="sh_symbol">.</span>gz</li><li>repomd<span class="sh_symbol">.</span>xml </li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@room9pc13 ~]# ls  /opt/libreoffice/repodata<font></font>
1a5d8311268f33ad2cbf91382110e1ef9875aeea366897253a5d27fd42f9e317-other.xml.gz<font></font>
2cd176f0b00492c0c13e0a659eda7dedeb1ab526dec5fd7c9bac7758558770d2-filelists.xml.gz<font></font>
6ecab3585a93a917202e177b9569046238332af449a6492fcace96ea79374668-filelists.sqlite.bz2<font></font>
b09a1f838262e0b67a5ab0d6be516bd921a914afd89864e09650f95662a20371-primary.sqlite.bz2<font></font>
b6fcf4a24de5dc08585bf52bd34be50d7df376d5fbcf50903bfd3c1dfdf160bf-other.sqlite.bz2<font></font>
f57724cf309cc102b2ee25596bf8fb39db3c23880404209ac1e379f7b9fd5c49-primary.xml.gz<font></font>
repomd.xml <font></font>
</pre></div></div>
      <a name="case5">
      </a>
      <h2>5 案例5：发布及测试yum仓库</h2>
      <h3>5.1 问题</h3>
      <p>沿用案例5，本例要求掌握发布及测试yum仓库的方法，方便在网络内提供集中的yum源服务器，主要完成下列任务：</p>
      <ol class="list">
        <li>在CentOS真机 上发布yum源，包括：rhel7 系统的光盘目录仓库、LibreOffice 的rpm软件包仓库
</li>
        <li>在主机 pc207 上使用上述yum源
</li>
      </ol>
      <h3>5.2 方案</h3>
      <p>通过网络发布yum软件源时，只需要配置HTTP或FTP资源服务器，然后将提前准备好的yum仓库目录部署到可访问的资源位置即可。</p>
      <p>在访问网络yum软件源时，注意客户端的baseurl地址必须与资源提供方式一致：</p>
      <ul class="list">
        <li>baseurl = htp://服务器地址/目录名  ==》 /var/www/html/目录名
</li>
        <li>baseurl = ftp://服务器地址/目录位置  ==》 /var/ftp/目录名
</li>
      </ul>
      <h3>5.3 步骤</h3>
      <p>实现此案例需要按照如下步骤进行。</p>
      <p class="number">步骤一：在CentOS真机上发布yum仓库</p>
      <p>1）快速搭建httpd服务器（若已建好，此步可跳过）</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@room9pc13 <span class="sh_symbol">~]</span># yum  <span class="sh_symbol">-</span>y  install  httpd  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">//装包</span></li><li><span class="sh_symbol">[</span>root@room9pc13 <span class="sh_symbol">~]</span># systemctl  restart  httpd &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">//起服务</span></li><li><span class="sh_symbol">[</span>root@room9pc13 <span class="sh_symbol">~]</span># systemctl  enable  httpd &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">//设置开机自启</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@room9pc13 ~]# yum  -y  install  httpd  				//装包<font></font>
[root@room9pc13 ~]# systemctl  restart  httpd 				//起服务<font></font>
[root@room9pc13 ~]# systemctl  enable  httpd 				//设置开机自启<font></font>
</pre></div></div>
      <p>2）确认前一步已经部署到Web网站目录的RHEL7光盘数据：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@room9pc13 <span class="sh_symbol">~]</span># du  <span class="sh_symbol">-</span><span class="sh_normal">sh  </span><span class="sh_symbol">/</span><span class="sh_keyword">var</span><span class="sh_regexp">/www/</span><span class="sh_normal">html</span><span class="sh_symbol">/</span><span class="sh_normal">rh7dvd</span><span class="sh_symbol">/</span>  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">//检查部署结果</span></li><li><span class="sh_number">3</span><span class="sh_symbol">.</span>9<span class="sh_normal">G&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="sh_symbol">/</span><span class="sh_keyword">var</span><span class="sh_regexp">/www/</span><span class="sh_normal">html</span><span class="sh_symbol">/</span><span class="sh_normal">rh7dvd</span><span class="sh_symbol">/</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@room9pc13 ~]# du  -sh  /var/www/html/rh7dvd/  				//检查部署结果<font></font>
3.9G	/var/www/html/rh7dvd/<font></font>
</pre></div></div>
      <p>3）将准备好的LibreOffice仓库目录部署到Web网页目录</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@room9pc13 <span class="sh_symbol">~]</span># <span class="sh_normal">mv  </span><span class="sh_symbol">/</span><span class="sh_normal">opt</span><span class="sh_symbol">/</span><span class="sh_normal">libreoffice</span><span class="sh_symbol">/</span>  <span class="sh_regexp">/var/</span><span class="sh_normal">www</span><span class="sh_symbol">/</span><span class="sh_normal">html</span><span class="sh_symbol">/</span></li><li><span class="sh_symbol">[</span>root@room9pc13 <span class="sh_symbol">~]</span># du  <span class="sh_symbol">-</span><span class="sh_normal">sh  </span><span class="sh_symbol">/</span><span class="sh_keyword">var</span><span class="sh_regexp">/www/</span><span class="sh_normal">html</span><span class="sh_symbol">/</span><span class="sh_normal">llibreoffice</span><span class="sh_symbol">/</span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">//检查部署结果</span></li><li>234<span class="sh_normal">M&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="sh_symbol">/</span><span class="sh_keyword">var</span><span class="sh_regexp">/www/</span><span class="sh_normal">html</span><span class="sh_symbol">/</span>libreoffice</li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@room9pc13 ~]# mv  /opt/libreoffice/  /var/www/html/<font></font>
[root@room9pc13 ~]# du  -sh  /var/www/html/llibreoffice/ 		//检查部署结果<font></font>
234M	/var/www/html/libreoffice<font></font>
</pre></div></div>
      <p class="number">步骤二：在pc207上访问yum仓库</p>
      <p>1）添加新的yum仓库设置</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@pc207 <span class="sh_symbol">~]</span># <span class="sh_normal">vim  </span><span class="sh_symbol">/</span><span class="sh_normal">etc</span><span class="sh_symbol">/</span>yum<span class="sh_symbol">.</span>repos<span class="sh_symbol">.</span><span class="sh_normal">d</span><span class="sh_symbol">/</span><span class="sh_keyword">new</span><span class="sh_symbol">.</span>repo</li><li><span class="sh_symbol">[</span>rh7dvd<span class="sh_symbol">]</span></li><li>name <span class="sh_symbol">=</span> RHEL <span class="sh_number">7.2</span> Server</li><li>baseurl <span class="sh_symbol">=</span> http<span class="sh_symbol">:</span><span class="sh_comment">//192.168.4.254/rh7dvd</span></li><li>gpgcheck <span class="sh_symbol">=</span> <span class="sh_number">0</span></li><li><span style="display:none;">&nbsp;</span></li><li><span class="sh_symbol">[</span>libreoffice<span class="sh_symbol">]</span></li><li>name <span class="sh_symbol">=</span> LibreOffice <span class="sh_number">5</span></li><li>baseurl<span class="sh_symbol">=</span>http<span class="sh_symbol">:</span><span class="sh_comment">//192.168.4.254/libreoffice</span></li><li>gpgcheck <span class="sh_symbol">=</span> <span class="sh_number">0</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@pc207 ~]# vim  /etc/yum.repos.d/new.repo<font></font>
[rh7dvd]<font></font>
name = RHEL 7.2 Server<font></font>
baseurl = http://192.168.4.254/rh7dvd<font></font>
gpgcheck = 0<font></font>
<font></font>
[libreoffice]<font></font>
name = LibreOffice 5<font></font>
baseurl=http://192.168.4.254/libreoffice<font></font>
gpgcheck = 0<font></font>
</pre></div></div>
      <p>2）测试新的yum仓库</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@pc207 <span class="sh_symbol">~]</span># yum  repolist</li><li><span class="sh_symbol">..</span> <span class="sh_symbol">..</span></li><li>repo id             repo name                            status</li><li>libreoffice         LibreOffice <span class="sh_number">5</span>                          <span class="sh_number">53</span></li><li>rh7dvd              RHEL <span class="sh_number">7.2</span> Server                      <span class="sh_number">4620</span></li><li><span class="sh_symbol">..</span> <span class="sh_symbol">..</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@pc207 ~]# yum  repolist<font></font>
.. ..<font></font>
repo id             repo name                            status<font></font>
libreoffice         LibreOffice 5                          53<font></font>
rh7dvd              RHEL 7.2 Server                      4620<font></font>
.. ..<font></font>
<font></font>
</pre></div></div>
      <a name="case6">
      </a>
      <h2>6 案例6：vim效率操作</h2>
      <h3>6.1 问题</h3>
      <p>本例要求掌握使用vim文本编辑器时能够提高操作效率的一些常用技巧和方法，完成下列任务：</p>
      <ol class="list">
        <li>将文件 /etc/passwd 复制为 /opt/nsd.txt，然后打开 /opt/nsd.txt 文件，练习命令模式下的切换/复制/删除/查找操作
</li>
        <li>将文件 /etc/man_db.conf 复制到 /opt 目录下，然后打开 /opt/man_db.conf 文件，将第50~100行内的“man”替换为“MAN”，在 vim 中设置显示行号查看效果
</li>
      </ol>
      <h3>6.2 方案</h3>
      <p>命令模式常用操作：</p>
      <ul class="list">
        <li>1G 或 gg ，跳转到文件的首行 
</li>
        <li>G ，跳转到文件的末尾行 
</li>
        <li>yy、#yy ，复制光标处的一行、#行
</li>
        <li>p、P ，粘贴到光标处之后、之前
</li>
        <li>x 或 Delete键 ，删除光标处的单个字符
</li>
        <li>dd、#dd ，删除光标处的一行、#行
</li>
        <li>d^、d$ ，从光标处之前删除至行首/行尾
</li>
        <li>/word	向后查找字符串“word”，再按n/N跳至后/前一个结果 
</li>
        <li>u ，撤销最近的一次操作
</li>
        <li>U ，撤销对当前行的所有修改
</li>
        <li>Ctrl + r	取消前一次撤销操作
</li>
        <li>ZZ	保存修改并退出
</li>
      </ul>
      <p>末行模式常用操作：</p>
      <ul class="list">
        <li>:s/old/new ，替换当前行第一个“old”
</li>
        <li>:s/old/new/g ，替换当前行所有的“old”
</li>
        <li>:n,m  s/old/new/g ，替换第n-m行所有的“old”
</li>
        <li>:%  s/old/new/g ，替换文件内所有的“old”
</li>
        <li>:w  /root/newfile ，另存为其它文件
</li>
        <li>:r  /etc/filesystems ，读入其他文件内容
</li>
        <li>:set nu|nonu ，显示/不显示行号
</li>
        <li>:set ai|noai ，启用/关闭自动缩进
</li>
      </ul>
      <h3>6.3 步骤</h3>
      <p>实现此案例需要按照如下步骤进行。</p>
      <p class="number">步骤一：vim命令模式下的切换/复制/删除/查找</p>
      <p>1）建立练习文件</p>
      <p>将文件 /etc/passwd 复制为 /opt/nsd.txt：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@svr7 <span class="sh_symbol">~]</span># <span class="sh_normal">cp  </span><span class="sh_symbol">/</span><span class="sh_normal">etc</span><span class="sh_symbol">/</span><span class="sh_normal">passwd  </span><span class="sh_symbol">/</span><span class="sh_normal">opt</span><span class="sh_symbol">/</span>nsd<span class="sh_symbol">.</span>txt</li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@svr7 ~]# cp  /etc/passwd  /opt/nsd.txt
</pre></div></div>
      <p>2）使用vim打开练习文件，默认处于命令模式</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@svr7 <span class="sh_symbol">~]</span># <span class="sh_normal">vim  </span><span class="sh_symbol">/</span><span class="sh_normal">opt</span><span class="sh_symbol">/</span>nsd<span class="sh_symbol">.</span>txt</li><li><span class="sh_symbol">..</span> <span class="sh_symbol">..</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@svr7 ~]# vim  /opt/nsd.txt<font></font>
.. ..<font></font>
</pre></div></div>
      <p>3）在命令模式下完成下列操作</p>
      <p>切换操作：G 最后一行，5G 第5行，gg 第一行。</p>
      <p>复制操作：按2yy复制2行，7G移动到第7行，p 粘贴。</p>
      <p>删除操作：25G 移动到第25行，200dd 从此行开始删除200行（不够就剩下全删）。</p>
      <p>查找操作：gg 第一行，/adm 查找关键词adm，n 跳转到下一个结果。</p>
      <p>4）保存并退出编辑器</p>
      <p>ZZ 保存退出。</p>
      <p class="number">步骤二：vim末行模式下的替换/设置操作</p>
      <p>1）建立练习文件</p>
      <p>将文件 /etc/man_db.conf 复制到 /opt/ 目录下：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@svr7 <span class="sh_symbol">~]</span># <span class="sh_normal">cp  </span><span class="sh_symbol">/</span><span class="sh_normal">etc</span><span class="sh_symbol">/</span>man_db<span class="sh_symbol">.</span><span class="sh_normal">conf  </span><span class="sh_symbol">/</span><span class="sh_normal">opt</span><span class="sh_symbol">/</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@svr7 ~]# cp  /etc/man_db.conf  /opt/
</pre></div></div>
      <p>2）使用vim打开练习文件，输入:切换到末行模式</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@svr7 <span class="sh_symbol">~]</span># <span class="sh_normal">vim  </span><span class="sh_symbol">/</span><span class="sh_normal">opt</span><span class="sh_symbol">/</span>man_db<span class="sh_symbol">.</span>conf</li><li><span class="sh_symbol">..</span> <span class="sh_symbol">..</span></li><li><span class="sh_symbol">:</span> </li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@svr7 ~]# vim  /opt/man_db.conf<font></font>
.. ..<font></font>
: <font></font>
</pre></div></div>
      <p>3）在末行模式下完成下列操作</p>
      <p>输入 :set  nu ，确认后显示行号。</p>
      <p>输入 :50,100 s/man/MAN/g ，确认将第50~100行内的“man”替换为“MAN”。</p>
      <p>4）保存并退出编辑器</p>
      <p>输入 :wq ，确认后保存并退出编辑器。</p>
      <a name="case7">
      </a>
      <h2>7 案例7：编译安装软件包</h2>
      <h3>7.1 问题</h3>
      <p>本例要求掌握常规源代码应用的安装过程，通过编译的方式安装inotify-tools 软件工具，完成下列任务：</p>
      <ol class="list">
        <li>释放 inotify-tools-3.13.tar.gz 源码包
</li>
        <li>配置 ./configure
</li>
        <li>编译 make、安装 make install
</li>
        <li>测试inotifywait监控工具的用法及用途
</li>
      </ol>
      <h3>7.2 方案</h3>
      <p>对于标准源码发布的C/C++软件包，编译安装一般包括以下过程：</p>
      <ol class="list">
        <li>解包：使用tar命令，将下载的源代码释放至指定目录
</li>
        <li>配置：执行源码目录内的 ./configure 脚本，指定安装目录/功能模块等选项
</li>
        <li>编译：在源码目录下执行 make 操作，根据配置清单Makefile生成可执行的二进制程序文件
</li>
        <li>安装：在源码目录下执行make install 操作，将编译好的程序及相关文件复制到安装目录
</li>
      </ol>
      <h3>7.3 步骤</h3>
      <p>实现此案例需要按照如下步骤进行。</p>
      <p class="number">步骤一：确认已配置好编译环境</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@svr7 <span class="sh_symbol">~]</span># yum  <span class="sh_symbol">-</span>y  install  gcc  gcc<span class="sh_symbol">-</span>c<span class="sh_symbol">++</span>  make</li><li><span class="sh_symbol">..</span> <span class="sh_symbol">..</span></li><li><span class="sh_symbol">[</span>root@svr7 <span class="sh_symbol">~]</span># gcc  <span class="sh_symbol">--</span>version</li><li><span class="sh_function">gcc</span> <span class="sh_symbol">(</span>GCC<span class="sh_symbol">)</span> <span class="sh_number">4.8.5</span> <span class="sh_number">20150623</span> <span class="sh_symbol">(</span>Red Hat <span class="sh_number">4.8.5-4</span><span class="sh_symbol">)</span></li><li><span class="sh_function">Copyright</span> <span class="sh_symbol">(</span>C<span class="sh_symbol">)</span> <span class="sh_number">2015</span> Free Software Foundation<span class="sh_symbol">,</span> Inc<span class="sh_symbol">.</span></li><li>This is free software<span class="sh_symbol">;</span> see the source <span class="sh_keyword">for</span> copying conditions<span class="sh_symbol">.</span>  There is NO</li><li>warranty<span class="sh_symbol">;</span> not even <span class="sh_keyword">for</span> MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE<span class="sh_symbol">.</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@svr7 ~]# yum  -y  install  gcc  gcc-c++  make<font></font>
.. ..<font></font>
[root@svr7 ~]# gcc  --version<font></font>
gcc (GCC) 4.8.5 20150623 (Red Hat 4.8.5-4)<font></font>
Copyright (C) 2015 Free Software Foundation, Inc.<font></font>
This is free software; see the source for copying conditions.  There is NO<font></font>
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.<font></font>
</pre></div></div>
      <p class="number">步骤二：编译安装inotify-tools软件包</p>
      <p>1）解包inotify-tools-3.13.tar.gz文件</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@svr7 <span class="sh_symbol">~]</span># ls  inotify<span class="sh_symbol">-</span>tools<span class="sh_number">-3.13</span><span class="sh_symbol">.</span>tar<span class="sh_symbol">.</span>gz </li><li>inotify<span class="sh_symbol">-</span>tools<span class="sh_number">-3.13</span><span class="sh_symbol">.</span>tar<span class="sh_symbol">.</span>gz</li><li><span class="sh_symbol">[</span>root@svr7 <span class="sh_symbol">~]</span># tar  xf  inotify<span class="sh_symbol">-</span>tools<span class="sh_number">-3.13</span><span class="sh_symbol">.</span>tar<span class="sh_symbol">.</span>gz  <span class="sh_symbol">-</span><span class="sh_normal">C </span><span class="sh_symbol">/</span><span class="sh_normal">usr</span><span class="sh_symbol">/</span><span class="sh_normal">src</span><span class="sh_symbol">/</span> </li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@svr7 ~]# ls  inotify-tools-3.13.tar.gz <font></font>
inotify-tools-3.13.tar.gz<font></font>
[root@svr7 ~]# tar  xf  inotify-tools-3.13.tar.gz  -C /usr/src/ <font></font>
</pre></div></div>
      <p>2）配置 ./configure，安装目录默认（/usr/local/*/）</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@svr7 <span class="sh_symbol">~]</span># <span class="sh_normal">cd  </span><span class="sh_symbol">/</span><span class="sh_normal">usr</span><span class="sh_symbol">/</span><span class="sh_normal">src</span><span class="sh_symbol">/</span>inotify<span class="sh_symbol">-</span>tools<span class="sh_number">-3.13</span><span class="sh_regexp">/  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/</span><span class="sh_symbol">/</span>进入源码目录</li><li><span class="sh_symbol">[</span>root@svr7 inotify<span class="sh_symbol">-</span>tools<span class="sh_number">-3.13</span><span class="sh_symbol">]</span># <span class="sh_symbol">.</span><span class="sh_regexp">/configure  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/</span><span class="sh_symbol">/</span>配置操作</li><li>checking <span class="sh_keyword">for</span> a BSD<span class="sh_symbol">-</span>compatible install<span class="sh_symbol">...</span> <span class="sh_regexp">/usr/</span><span class="sh_normal">bin</span><span class="sh_symbol">/</span>install <span class="sh_symbol">-</span>c</li><li>checking whether build environment is sane<span class="sh_symbol">...</span> yes</li><li>checking <span class="sh_keyword">for</span> gawk<span class="sh_symbol">...</span> gawk</li><li><span class="sh_symbol">..</span> <span class="sh_symbol">..</span></li><li>configure<span class="sh_symbol">:</span> creating <span class="sh_symbol">./</span>config<span class="sh_symbol">.</span>status</li><li>config<span class="sh_symbol">.</span>status<span class="sh_symbol">:</span> creating Makefile</li><li><span class="sh_symbol">..</span> <span class="sh_symbol">..</span></li><li><span style="display:none;">&nbsp;</span></li><li><span class="sh_symbol">[</span>root@svr7 inotify<span class="sh_symbol">-</span>tools<span class="sh_number">-3.13</span><span class="sh_symbol">]</span># ls  Makefile  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">//检查配置结果</span></li><li>Makefile</li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@svr7 ~]# cd  /usr/src/inotify-tools-3.13/  		//进入源码目录<font></font>
[root@svr7 inotify-tools-3.13]# ./configure  			//配置操作<font></font>
checking for a BSD-compatible install... /usr/bin/install -c<font></font>
checking whether build environment is sane... yes<font></font>
checking for gawk... gawk<font></font>
.. ..<font></font>
configure: creating ./config.status<font></font>
config.status: creating Makefile<font></font>
.. ..<font></font>
<font></font>
[root@svr7 inotify-tools-3.13]# ls  Makefile  			//检查配置结果<font></font>
Makefile<font></font>
</pre></div></div>
      <p>3）编译 make</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@svr7 inotify<span class="sh_symbol">-</span>tools<span class="sh_number">-3.13</span><span class="sh_symbol">]</span># make</li><li><span class="sh_symbol">..</span> <span class="sh_symbol">..</span></li><li>Making all <span class="sh_keyword">in</span> src</li><li>make<span class="sh_symbol">[</span><span class="sh_number">2</span><span class="sh_symbol">]:</span> Entering directory `<span class="sh_regexp">/usr/</span><span class="sh_normal">src</span><span class="sh_symbol">/</span>inotify<span class="sh_symbol">-</span>tools<span class="sh_number">-3.13</span><span class="sh_symbol">/</span>src<span class="sh_string">'</span></li><li><span class="sh_string">make[3]: Entering directory `/usr/src/inotify-tools-3.13'</span></li><li>make<span class="sh_symbol">[</span><span class="sh_number">3</span><span class="sh_symbol">]:</span> Leaving directory `<span class="sh_regexp">/usr/</span><span class="sh_normal">src</span><span class="sh_symbol">/</span>inotify<span class="sh_symbol">-</span>tools<span class="sh_number">-3.13</span><span class="sh_string">'</span></li><li><span class="sh_string">.. ..</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@svr7 inotify-tools-3.13]# make<font></font>
.. ..<font></font>
Making all in src<font></font>
make[2]: Entering directory `/usr/src/inotify-tools-3.13/src'<font></font>
make[3]: Entering directory `/usr/src/inotify-tools-3.13'<font></font>
make[3]: Leaving directory `/usr/src/inotify-tools-3.13'<font></font>
.. ..<font></font>
</pre></div></div>
      <p>4）安装 make install</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@svr7 inotify<span class="sh_symbol">-</span>tools<span class="sh_number">-3.13</span><span class="sh_symbol">]</span># make  install</li><li><span class="sh_symbol">..</span> <span class="sh_symbol">..</span></li><li><span class="sh_regexp">/usr/</span><span class="sh_normal">bin</span><span class="sh_symbol">/</span>install <span class="sh_symbol">-</span>c <span class="sh_symbol">.</span><span class="sh_normal">libs</span><span class="sh_symbol">/</span><span class="sh_normal">inotifywait </span><span class="sh_symbol">/</span><span class="sh_normal">usr</span><span class="sh_symbol">/</span><span class="sh_normal">local</span><span class="sh_symbol">/</span><span class="sh_normal">bin</span><span class="sh_symbol">/</span>inotifywait</li><li>  <span class="sh_regexp">/bin/</span>sh <span class="sh_symbol">..</span><span class="sh_regexp">/libtool --mode=install /</span><span class="sh_normal">usr</span><span class="sh_symbol">/</span><span class="sh_normal">bin</span><span class="sh_symbol">/</span>install <span class="sh_symbol">-</span>c <span class="sh_string">'inotifywatch'</span> <span class="sh_string">'/usr/local/bin/inotifywatch'</span></li><li><span class="sh_symbol">..</span> <span class="sh_symbol">..</span></li><li><span style="display:none;">&nbsp;</span></li><li><span class="sh_symbol">[</span>root@svr7 inotify<span class="sh_symbol">-</span>tools<span class="sh_number">-3.13</span><span class="sh_symbol">]</span># <span class="sh_normal">find  </span><span class="sh_symbol">/</span><span class="sh_normal">usr</span><span class="sh_symbol">/</span><span class="sh_normal">local</span><span class="sh_symbol">/</span>  <span class="sh_symbol">-</span>name  <span class="sh_string">"inotify*"</span></li><li><span class="sh_regexp">/usr/</span><span class="sh_normal">local</span><span class="sh_symbol">/</span><span class="sh_normal">bin</span><span class="sh_symbol">/</span>inotifywait  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">//确认安装结果</span></li><li><span class="sh_regexp">/usr/</span><span class="sh_normal">local</span><span class="sh_symbol">/</span><span class="sh_normal">bin</span><span class="sh_symbol">/</span>inotifywatch</li><li><span class="sh_regexp">/usr/</span><span class="sh_normal">local</span><span class="sh_symbol">/</span><span class="sh_normal">include</span><span class="sh_symbol">/</span>inotifytools</li><li><span class="sh_regexp">/usr/</span><span class="sh_normal">local</span><span class="sh_symbol">/</span><span class="sh_normal">include</span><span class="sh_symbol">/</span><span class="sh_normal">inotifytools</span><span class="sh_symbol">/</span>inotifytools<span class="sh_symbol">.</span>h</li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@svr7 inotify-tools-3.13]# make  install<font></font>
.. ..<font></font>
/usr/bin/install -c .libs/inotifywait /usr/local/bin/inotifywait<font></font>
  /bin/sh ../libtool --mode=install /usr/bin/install -c 'inotifywatch' '/usr/local/bin/inotifywatch'<font></font>
.. ..<font></font>
<font></font>
[root@svr7 inotify-tools-3.13]# find  /usr/local/  -name  "inotify*"<font></font>
/usr/local/bin/inotifywait  							//确认安装结果<font></font>
/usr/local/bin/inotifywatch<font></font>
/usr/local/include/inotifytools<font></font>
/usr/local/include/inotifytools/inotifytools.h<font></font>
</pre></div></div>
      <p class="number">步骤三：测试inotify-tools软件程序</p>
      <p>软件包inotify-tools提供了一个主要程序inotifywait，可以用来监控指定目录或文档的变化，并及时给出通知。</p>
      <p>1）开启对/opt目录的事件监控</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@svr7 <span class="sh_symbol">~]</span># inotifywait  <span class="sh_symbol">-</span><span class="sh_normal">mrq  </span><span class="sh_symbol">/</span>opt <span class="sh_symbol">&amp;</span>  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">//开启监控</span></li><li><span class="sh_symbol">[</span><span class="sh_number">1</span><span class="sh_symbol">]</span> <span class="sh_number">15568</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@svr7 ~]# inotifywait  -mrq  /opt &amp;  				//开启监控<font></font>
[1] 15568<font></font>
</pre></div></div>
      <p>2）修改/opt/目录内容，观察屏幕输出信息</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@svr7 <span class="sh_symbol">~]</span># <span class="sh_normal">touch  </span><span class="sh_symbol">/</span><span class="sh_normal">opt</span><span class="sh_symbol">/</span>a<span class="sh_symbol">.</span>txt  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">//新建文件a.txt</span></li><li><span class="sh_regexp">/opt/</span> CREATE a<span class="sh_symbol">.</span>txt</li><li><span class="sh_regexp">/opt/</span> OPEN a<span class="sh_symbol">.</span>txt</li><li><span class="sh_regexp">/opt/</span> ATTRIB a<span class="sh_symbol">.</span>txt</li><li><span class="sh_regexp">/opt/</span> CLOSE_WRITE<span class="sh_symbol">,</span>CLOSE a<span class="sh_symbol">.</span>txt</li><li><span style="display:none;">&nbsp;</span></li><li><span class="sh_symbol">[</span>root@svr7 <span class="sh_symbol">~]</span># <span class="sh_normal">mv  </span><span class="sh_symbol">/</span><span class="sh_normal">opt</span><span class="sh_symbol">/</span>a<span class="sh_symbol">.</span><span class="sh_normal">txt  </span><span class="sh_symbol">/</span><span class="sh_normal">opt</span><span class="sh_symbol">/</span>b<span class="sh_symbol">.</span>txt  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">//将文件改名</span></li><li><span class="sh_regexp">/opt/</span> MOVED_FROM a<span class="sh_symbol">.</span>txt</li><li><span class="sh_regexp">/opt/</span> MOVED_TO b<span class="sh_symbol">.</span>txt</li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@svr7 ~]# touch  /opt/a.txt  						//新建文件a.txt<font></font>
/opt/ CREATE a.txt<font></font>
/opt/ OPEN a.txt<font></font>
/opt/ ATTRIB a.txt<font></font>
/opt/ CLOSE_WRITE,CLOSE a.txt<font></font>
<font></font>
[root@svr7 ~]# mv  /opt/a.txt  /opt/b.txt  				//将文件改名<font></font>
/opt/ MOVED_FROM a.txt<font></font>
/opt/ MOVED_TO b.txt<font></font>
</pre></div></div>
      <p>3）结束inotifywait监控</p>
      <p>杀死当前用户的第一个后台任务：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@svr7 <span class="sh_symbol">~]</span># kill  <span class="sh_symbol">-</span><span class="sh_number">9</span>  <span class="sh_symbol">%</span><span class="sh_number">1</span></li><li><span class="sh_symbol">[</span><span class="sh_number">1</span><span class="sh_symbol">]+</span>  Killed                  inotifywait <span class="sh_symbol">-</span><span class="sh_normal">mrq </span><span class="sh_symbol">/</span>opt</li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@svr7 ~]# kill  -9  %1<font></font>
[1]+  Killed                  inotifywait -mrq /opt<font></font>
</pre></div></div>
      <a name="case8">
      </a>
      <h2>8 案例8：使用systemctl工具</h2>
      <h3>8.1 问题</h3>
      <p>本例要求掌握systemctl控制工具的基本操作，完成下列任务：</p>
      <ol class="list">
        <li>重启 httpd、crond、bluetooth 服务，查看状态
</li>
        <li>禁止 bluetooth 服务开机自启，并停用此服务
</li>
        <li>设置默认级别为 multi-user.target 并确认
</li>
      </ol>
      <h3>8.2 方案</h3>
      <p>systemd是一个更高效的系统&amp;服务管理器，其相关特性如下：</p>
      <ul class="list">
        <li>开机服务并行启动，各系统服务间的精确依赖
</li>
        <li>配置目录：/etc/systemd/system/
</li>
        <li>服务目录：/lib/systemd/system/
</li>
      </ul>
      <p>systemctl是systemd的管理工具，将相关资源组织为unit配置单元进行管理。</p>
      <p>不同的unit决定了一组相关的启动任务，service和target是最常用的配置单元：</p>
      <ul class="list">
        <li>service：后台独立服务
</li>
        <li>target：一套配置单元的组合，类似于传统“运行级别”
</li>
      </ul>
      <h3>8.3 步骤</h3>
      <p>实现此案例需要按照如下步骤进行。</p>
      <p class="number">步骤一：重启 httpd、crond、bluetooth 服务，查看状态</p>
      <p>1）重启系统服务httpd、crond、bluetooth</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@svr7 <span class="sh_symbol">~]</span># systemctl  restart  httpd  crond  bluetooth</li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@svr7 ~]# systemctl  restart  httpd  crond  bluetooth
</pre></div></div>
      <p>2）查看上述服务的状态</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@svr7 <span class="sh_symbol">~]</span># systemctl  status  httpd  crond  bluetooth </li><li><span class="sh_symbol">*</span> httpd<span class="sh_symbol">.</span>service <span class="sh_symbol">-</span> The Apache HTTP Server</li><li>   Loaded<span class="sh_symbol">:</span> <span class="sh_function">loaded</span> <span class="sh_symbol">(</span><span class="sh_regexp">/usr/</span><span class="sh_normal">lib</span><span class="sh_symbol">/</span><span class="sh_normal">systemd</span><span class="sh_symbol">/</span><span class="sh_normal">system</span><span class="sh_symbol">/</span>httpd<span class="sh_symbol">.</span>service<span class="sh_symbol">;</span> disabled<span class="sh_symbol">;</span> vendor preset<span class="sh_symbol">:</span> disabled<span class="sh_symbol">)</span></li><li>   Active<span class="sh_symbol">:</span> <span class="sh_function">active</span> <span class="sh_symbol">(</span>running<span class="sh_symbol">)</span> since Fri <span class="sh_number">2017-01-06</span> <span class="sh_number">18</span><span class="sh_symbol">:</span><span class="sh_number">18</span><span class="sh_symbol">:</span><span class="sh_number">20</span> CST<span class="sh_symbol">;</span> 18s ago</li><li><span class="sh_symbol">..</span> <span class="sh_symbol">..</span></li><li><span style="display:none;">&nbsp;</span></li><li><span class="sh_symbol">*</span> crond<span class="sh_symbol">.</span>service <span class="sh_symbol">-</span> Command Scheduler</li><li>   Loaded<span class="sh_symbol">:</span> <span class="sh_function">loaded</span> <span class="sh_symbol">(</span><span class="sh_regexp">/usr/</span><span class="sh_normal">lib</span><span class="sh_symbol">/</span><span class="sh_normal">systemd</span><span class="sh_symbol">/</span><span class="sh_normal">system</span><span class="sh_symbol">/</span>crond<span class="sh_symbol">.</span>service<span class="sh_symbol">;</span> enabled<span class="sh_symbol">;</span> vendor preset<span class="sh_symbol">:</span> enabled<span class="sh_symbol">)</span></li><li>   Active<span class="sh_symbol">:</span> <span class="sh_function">active</span> <span class="sh_symbol">(</span>running<span class="sh_symbol">)</span> since Fri <span class="sh_number">2017-01-06</span> <span class="sh_number">18</span><span class="sh_symbol">:</span><span class="sh_number">18</span><span class="sh_symbol">:</span><span class="sh_number">19</span> CST<span class="sh_symbol">;</span> 19s ago</li><li><span class="sh_symbol">..</span> <span class="sh_symbol">..</span></li><li><span style="display:none;">&nbsp;</span></li><li><span class="sh_symbol">*</span> bluetooth<span class="sh_symbol">.</span>service <span class="sh_symbol">-</span> Bluetooth service</li><li>   Loaded<span class="sh_symbol">:</span> <span class="sh_function">loaded</span> <span class="sh_symbol">(</span><span class="sh_regexp">/usr/</span><span class="sh_normal">lib</span><span class="sh_symbol">/</span><span class="sh_normal">systemd</span><span class="sh_symbol">/</span><span class="sh_normal">system</span><span class="sh_symbol">/</span>bluetooth<span class="sh_symbol">.</span>service<span class="sh_symbol">;</span> enabled<span class="sh_symbol">;</span> vendor preset<span class="sh_symbol">:</span> enabled<span class="sh_symbol">)</span></li><li>   Active<span class="sh_symbol">:</span> <span class="sh_function">active</span> <span class="sh_symbol">(</span>running<span class="sh_symbol">)</span> since Fri <span class="sh_number">2017-01-06</span> <span class="sh_number">18</span><span class="sh_symbol">:</span><span class="sh_number">18</span><span class="sh_symbol">:</span><span class="sh_number">19</span> CST<span class="sh_symbol">;</span> 19s ago</li><li><span class="sh_symbol">..</span> <span class="sh_symbol">..</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@svr7 ~]# systemctl  status  httpd  crond  bluetooth <font></font>
* httpd.service - The Apache HTTP Server<font></font>
   Loaded: loaded (/usr/lib/systemd/system/httpd.service; disabled; vendor preset: disabled)<font></font>
   Active: active (running) since Fri 2017-01-06 18:18:20 CST; 18s ago<font></font>
.. ..<font></font>
<font></font>
* crond.service - Command Scheduler<font></font>
   Loaded: loaded (/usr/lib/systemd/system/crond.service; enabled; vendor preset: enabled)<font></font>
   Active: active (running) since Fri 2017-01-06 18:18:19 CST; 19s ago<font></font>
.. ..<font></font>
<font></font>
* bluetooth.service - Bluetooth service<font></font>
   Loaded: loaded (/usr/lib/systemd/system/bluetooth.service; enabled; vendor preset: enabled)<font></font>
   Active: active (running) since Fri 2017-01-06 18:18:19 CST; 19s ago<font></font>
.. ..<font></font>
</pre></div></div>
      <p class="number">步骤二：禁止 bluetooth 服务开机自启，并停用此服务</p>
      <p>1）停用bluetooth服务</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@svr7 <span class="sh_symbol">~]</span># systemctl  stop  bluetooth</li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@svr7 ~]# systemctl  stop  bluetooth
</pre></div></div>
      <p>2）禁止bluetooth服务开机自启</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@svr7 <span class="sh_symbol">~]</span># systemctl  disable  bluetooth</li><li>Removed <span class="sh_normal">symlink </span><span class="sh_symbol">/</span><span class="sh_normal">etc</span><span class="sh_symbol">/</span><span class="sh_normal">systemd</span><span class="sh_symbol">/</span><span class="sh_normal">system</span><span class="sh_symbol">/</span>dbus<span class="sh_symbol">-</span>org<span class="sh_symbol">.</span>bluez<span class="sh_symbol">.</span>service<span class="sh_symbol">.</span></li><li>Removed <span class="sh_normal">symlink </span><span class="sh_symbol">/</span><span class="sh_normal">etc</span><span class="sh_symbol">/</span><span class="sh_normal">systemd</span><span class="sh_symbol">/</span><span class="sh_normal">system</span><span class="sh_symbol">/</span>bluetooth<span class="sh_symbol">.</span>target<span class="sh_symbol">.</span><span class="sh_normal">wants</span><span class="sh_symbol">/</span>bluetooth<span class="sh_symbol">.</span>service<span class="sh_symbol">.</span></li><li><span style="display:none;">&nbsp;</span></li><li><span class="sh_symbol">[</span>root@svr7 <span class="sh_symbol">~]</span># systemctl  is<span class="sh_symbol">-</span>enabled  Bluetooth &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">//检查结果</span></li><li>disabled</li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@svr7 ~]# systemctl  disable  bluetooth<font></font>
Removed symlink /etc/systemd/system/dbus-org.bluez.service.<font></font>
Removed symlink /etc/systemd/system/bluetooth.target.wants/bluetooth.service.<font></font>
<font></font>
[root@svr7 ~]# systemctl  is-enabled  Bluetooth 			//检查结果<font></font>
disabled<font></font>
</pre></div></div>
      <p class="number">步骤三：设置默认级别为 multi-user.target 并确认</p>
      <p>1）查看默认运行级别</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@svr7 <span class="sh_symbol">~]</span># systemctl  get<span class="sh_symbol">-</span><span class="sh_keyword">default</span> </li><li>graphical<span class="sh_symbol">.</span>target</li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@svr7 ~]# systemctl  get-default <font></font>
graphical.target<font></font>
</pre></div></div>
      <p>2）将默认运行级别设置为multi-user.target</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@svr7 <span class="sh_symbol">~]</span># systemctl  set<span class="sh_symbol">-</span><span class="sh_keyword">default</span>  multi<span class="sh_symbol">-</span>user<span class="sh_symbol">.</span>target </li><li>Removed <span class="sh_normal">symlink </span><span class="sh_symbol">/</span><span class="sh_normal">etc</span><span class="sh_symbol">/</span><span class="sh_normal">systemd</span><span class="sh_symbol">/</span><span class="sh_normal">system</span><span class="sh_symbol">/</span><span class="sh_keyword">default</span><span class="sh_symbol">.</span>target<span class="sh_symbol">.</span></li><li>Created symlink <span class="sh_normal">from </span><span class="sh_symbol">/</span><span class="sh_normal">etc</span><span class="sh_symbol">/</span><span class="sh_normal">systemd</span><span class="sh_symbol">/</span><span class="sh_normal">system</span><span class="sh_symbol">/</span><span class="sh_keyword">default</span><span class="sh_symbol">.</span>target <span class="sh_normal">to </span><span class="sh_symbol">/</span><span class="sh_normal">usr</span><span class="sh_symbol">/</span><span class="sh_normal">lib</span><span class="sh_symbol">/</span><span class="sh_normal">systemd</span><span class="sh_symbol">/</span><span class="sh_normal">system</span><span class="sh_symbol">/</span>multi<span class="sh_symbol">-</span>user<span class="sh_symbol">.</span>target<span class="sh_symbol">.</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@svr7 ~]# systemctl  set-default  multi-user.target <font></font>
Removed symlink /etc/systemd/system/default.target.<font></font>
Created symlink from /etc/systemd/system/default.target to /usr/lib/systemd/system/multi-user.target.<font></font>
</pre></div></div>
      <p>3）确认配置结果</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/SERVICES/DAY01/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@svr7 <span class="sh_symbol">~]</span># systemctl  get<span class="sh_symbol">-</span><span class="sh_keyword">default</span> </li><li>multi<span class="sh_symbol">-</span>user<span class="sh_symbol">.</span>target</li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@svr7 ~]# systemctl  get-default <font></font>
multi-user.target<font></font>
</pre></div></div>
      <p>根据此处的设置，重启此虚拟机后图形桌面将不再可用。</p>
    </div><div id="goog-gt-tt" class="skiptranslate" dir="ltr"><div style="padding: 8px;"><div><div class="logo"><img src="./扩展的几个应用 发布网络YUM源 vim编辑技巧 源码编译安装 systemctl控制_files/translate_24dp.png" width="20" height="20" alt="Google 翻译"></div></div></div><div class="top" style="padding: 8px; float: left; width: 100%;"><h1 class="title gray">原文</h1></div><div class="middle" style="padding: 8px;"><div class="original-text"></div></div><div class="bottom" style="padding: 8px;"><div class="activity-links"><span class="activity-link">提供更好的翻译建议</span><span class="activity-link"></span></div><div class="started-activity-container"><hr style="color: #CCC; background-color: #CCC; height: 1px; border: none;"><div class="activity-root"></div></div></div><div class="status-message" style="display: none;"></div></div>
  
<div class="goog-te-spinner-pos"><div class="goog-te-spinner-animation"><svg xmlns="http://www.w3.org/2000/svg" class="goog-te-spinner" width="96px" height="96px" viewBox="0 0 66 66"><circle class="goog-te-spinner-path" fill="none" stroke-width="6" stroke-linecap="round" cx="33" cy="33" r="30"></circle></svg></div></div></body></html>